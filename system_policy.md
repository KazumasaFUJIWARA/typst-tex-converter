# LaTeX ↔ Typst変換用Systemポリシー

## 基本システム指示

```
自然言語を翻訳や言い換えしないでください。

元の空白と句読点を保持してください。

マッピングテーブルに記載されたマクロ/構文のみを変換してください。

テーブルにないトークンはそのままコピーしてください。

テキスト、図表、参照、参考文献の順序を変更しないでください。

非コマンド部分は入力とバイト単位で同一であることを検証してください。
```

## システムメッセージテンプレート

### LaTeX → Typst変換用
```
微分記号の変換: dx → d x, 数学演算子のUnicode化: in → ∈, 数式環境の変換
```

```
微分記号の変換: dy → d y, 数学演算子のUnicode化: <= → ≤, 積分記号の変換: \int → ∫
```

```
数学演算子のUnicode化: cap → ∩, cup → ∪, subset → ⊂, supset → ⊃
```

```
数式環境の変換: \begin{align}...\end{align} → $ ... $, cases環境の変換
```

```
定理環境の変換: \begin{Theorem}...\end{Theorem} → #theorem[...]
```

```
参考文献の変換: \cite{ref} → @ref, \cite[page]{ref} → @ref
```

```
セクションの変換: \section{title} → = title, \subsection{title} → == title
```

```
テキスト装飾の変換: \textbf{text} → *text*, \textit{text} → _text_, \texttt{text} → `text`
```

```
URLとリンクの変換: \url{url} → [url], \href{url}{text} → [text](url)
```

```
改行の変換: \\ → \, \newline → \, \pagebreak → #pagebreak()
```

```
preambleの保持: \documentclass → // \documentclass, \usepackage → // \usepackage
```

```
数式内参照の変換: \eqref{eq:name} → "@eq:name", \ref{eq:name} → "@eq:name"
```

```
cases環境でのカンマのエスケープ: カンマを\,でエスケープ
```

```
積分記号の機械的置換: \int → ∫, \iint → ∬, \iiint → ∭
```

```
数学演算子の機械的置換: sum → ∑, prod → ∏, infty → ∞
```

```
集合記号の機械的置換: cap → ∩, cup → ∪, subset → ⊂, supset → ⊃, emptyset → ∅
```

```
数体系の機械的置換: RR → ℝ, NN → ℕ, ZZ → ℤ, QQ → ℚ, CC → ℂ
```

```
比較演算子の機械的置換: <= → ≤, >= → ≥, != → ≠, -> → →, => → ⇒
```

```
定理環境のラベル変換: \label{theorem:name} → id: "theorem:name"
```

```
定理環境の参照変換: \ref{theorem:name} → @theorem:name
```

```
図表のラベル変換: \label{fig:name} → <fig:name>, \label{tab:name} → <tab:name>
```

```
図表の参照変換: \ref{fig:name} → @fig:name, \ref{tab:name} → @tab:name
```

```
参考文献システムの変換: \bibliography{file} → #bibliography("file.bib")
```

```
文書設定の変換: \begin{document} → // \begin{document}, \end{document} → // \end{document}
```

```
コメントの変換: % コメント → // コメント
```

```
数式内の文字列: 数式内で文字列は引用符で囲む
```

```
複雑な数式の変換: 複数の変換規則を組み合わせ
```

```
微分方程式の変換: 偏微分と常微分の組み合わせ
```

```
ベクトル記法の変換: \mathbf{v} → v, \vec{v} → vec(v)
```

```
分数の変換: \frac{a}{b} → a/b, \dfrac{a}{b} → a/b
```

```
根号の変換: \sqrt{x} → sqrt(x), \sqrt[n]{x} → root(n, x)
```

```
指数と対数の変換: x^2 → x^2, \log x → log(x), \ln x → ln(x)
```

```
三角関数の変換: \sin x → sin(x), \cos x → cos(x), \tan x → tan(x)
```

```
極限の変換: \lim_{x \to a} → lim_(x → a), \lim_{n \to \infty} → lim_(n → ∞)
```

```
行列の変換: \begin{pmatrix}...\end{pmatrix} → mat(...)
```

```
行列式の変換: \begin{vmatrix}...\end{vmatrix} → det(mat(...))
```

```
複雑な定理環境: タイトルとラベルの組み合わせ
```

```
複雑な証明環境: タイトル付きの証明
```

```
複雑な定義環境: タイトル付きの定義
```

```
複雑な補題環境: タイトル付きの補題
```

```
複雑な系環境: タイトル付きの系
```

```
複雑な命題環境: タイトル付きの命題
```

```
複雑な注意環境: タイトル付きの注意
```

```
複雑な数式環境: 複数行の数式
```

```
複雑なcases環境: 複数の条件
```

```
複雑な積分: 多重積分と変数変換
```

```
複雑な微分: 高階偏微分
```

```
複雑な級数: テイラー級数
```

```
複雑な極限: ロピタルの定理
```

```
複雑な行列: 3x3行列
```

```
複雑な行列式: 3x3行列式
```

```
複雑な参考文献: 複数の引用
```

```
複雑なセクション: 深い階層
```

```
複雑なテキスト装飾: 組み合わせ
```

```
複雑なURL: 複数のリンク
```

```
複雑な改行: 複数の改行記号
```

```
複雑なpreamble: 複数のパッケージ
```

```
複雑な数式内参照: 複数の参照
```

```
複雑なcases環境: 複数の条件とカンマ
```

```
複雑な積分: 複数の積分記号
```

```
複雑な微分: 複数の微分記号
```

```
複雑な数学演算子: 複数の演算子
```

```
複雑な数体系: 複数の数体系
```

```
複雑な比較演算子: 複数の比較
```

```
複雑な定理環境: 複数の定理
```

```
複雑な定理環境の参照: 複数の参照
```

```
複雑な図表: 複数の図表
```

```
複雑な図表の参照: 複数の参照
```

```
複雑な参考文献システム: 複数のbibファイル
```

```
複雑な文書設定: 複数の設定
```

```
複雑なコメント: 複数のコメント
```

```
複雑な数式内の文字列: 複数の文字列
```

```
複雑な数式: 複数の変換規則の組み合わせ
```

```
複雑な微分方程式: 複数の微分
```

```
複雑なベクトル記法: 複数のベクトル
```

```
複雑な分数: 複数の分数
```

```
複雑な根号: 複数の根号
```

```
複雑な指数と対数: 複数の指数対数
```

```
複雑な三角関数: 複数の三角関数
```

```
複雑な極限: 複数の極限
```

```
複雑な行列: 複数の行列
```

```
複雑な行列式: 複数の行列式
```

## JSONLでの使用例

各JSONLエントリは適切なシステムメッセージを使用します：

```json
{
  "system": "微分記号の変換: dx → d x, 数学演算子のUnicode化: in → ∈, 数式環境の変換",
  "instruction": "LaTeX→Typst",
  "input": "\\int_0^1 x dx = \\sum_{i=1}^n x_i \\in \\RR",
  "output": "∫_0^1 x d x = ∑_(i=1)^n x_i ∈ ℝ"
}
```
